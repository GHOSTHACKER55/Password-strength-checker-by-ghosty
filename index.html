<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SMILE MC | PREMIUM STORE ðŸ‘‘</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
body{
    font-family: 'Plus Jakarta Sans', sans-serif;
    background:#0a0a0a;
    color:#fff;
    margin:0;
    padding-bottom:100px;
}
.modal{
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.9);
    backdrop-filter:blur(12px);
    z-index:999;
}
.active-modal{display:flex;align-items:center;justify-content:center;}
.portal-card{
    background:#fff;
    color:#000;
    border-radius:40px;
    padding:40px;
    width:95%;
    max-width:420px;
}
.toast{
    position:fixed;
    top:30px;
    left:50%;
    transform:translateX(-50%);
    background:#111;
    color:#fff;
    padding:18px 30px;
    border-radius:30px;
    font-size:12px;
    font-weight:800;
    letter-spacing:1px;
    z-index:9999;
    opacity:0;
    transition:0.3s;
}
.toast.show{opacity:1;top:50px;}
</style>
</head>
<body>

<div id="toast" class="toast"></div>

<!-- AUTH MODAL -->
<div id="authModal" class="modal">
<div class="portal-card">
<h2 id="auth-title" class="text-2xl font-black uppercase mb-6">Create Account</h2>

<div id="signup-fields" class="space-y-3">
<input id="reg-name" placeholder="FULL NAME" class="w-full p-4 bg-gray-100 rounded-xl text-[12px]">
<input id="reg-phone" placeholder="WHATSAPP NUMBER" class="w-full p-4 bg-gray-100 rounded-xl text-[12px]">
</div>

<div class="space-y-3 mt-3">
<input id="auth-email" placeholder="EMAIL ADDRESS" class="w-full p-4 bg-gray-100 rounded-xl text-[12px]">
<input id="auth-pass" type="password" placeholder="PASSWORD" class="w-full p-4 bg-gray-100 rounded-xl text-[12px]">

<button onclick="handleAuth()" id="auth-btn"
class="w-full bg-black text-white py-4 rounded-xl font-black uppercase text-[12px]">Register</button>

<p onclick="toggleAuthMode()" class="text-center text-[11px] opacity-50 cursor-pointer">Switch Mode</p>

<p onclick="resetPassword()" class="text-center text-[11px] text-blue-500 cursor-pointer">Forgot Password?</p>

<button onclick="closeModal('authModal')" class="w-full text-[10px] opacity-30 mt-4">Cancel</button>
</div>
</div>
</div>

<header class="p-6 flex justify-between items-center">
<h1 class="text-2xl font-black">SMILE MC ðŸ‘‘</h1>
<div id="user-display" class="text-xs opacity-40">Guest</div>
</header>

<main class="p-6">
<div id="product-grid" class="grid grid-cols-2 md:grid-cols-4 gap-6"></div>
</main>

<nav class="fixed bottom-6 left-1/2 -translate-x-1/2 bg-[#111] p-6 rounded-[40px] flex gap-10">
<div onclick="openModal('authModal')" class="cursor-pointer">ðŸ‘¤</div>
<div onclick="logoutUser()" class="cursor-pointer">ðŸšª</div>
</nav>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, onSnapshot, doc, setDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, sendPasswordResetEmail, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const firebaseConfig = {
apiKey: "YOUR_FIREBASE_KEY",
authDomain: "YOUR_DOMAIN",
projectId: "YOUR_ID",
storageBucket: "YOUR_BUCKET",
messagingSenderId: "YOUR_MSG",
appId: "YOUR_APP"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const auth = getAuth(app);

let isSignUp = true;

function showToast(msg){
const t = document.getElementById("toast");
t.innerText = msg;
t.classList.add("show");
setTimeout(()=>{t.classList.remove("show")},3000);
}

window.openModal = id => document.getElementById(id).classList.add("active-modal");
window.closeModal = id => document.getElementById(id).classList.remove("active-modal");

window.toggleAuthMode = ()=>{
isSignUp=!isSignUp;
document.getElementById("auth-title").innerText=isSignUp?"Create Account":"Sign In";
document.getElementById("auth-btn").innerText=isSignUp?"Register":"Login";
document.getElementById("signup-fields").style.display=isSignUp?"block":"none";
};

window.handleAuth = async ()=>{
const email=document.getElementById("auth-email").value.trim();
const pass=document.getElementById("auth-pass").value.trim();
const name=document.getElementById("reg-name").value.trim();
const phone=document.getElementById("reg-phone").value.trim();

if(!email||!pass){showToast("Fill Email & Password");return;}

try{
if(isSignUp){
const res=await createUserWithEmailAndPassword(auth,email,pass);
await setDoc(doc(db,"users",res.user.uid),{
name:name,
phone:phone,
email:email,
createdAt:serverTimestamp()
});
showToast("Account Created ðŸ‘‘");
}else{
await signInWithEmailAndPassword(auth,email,pass);
showToast("Welcome Back ðŸ”¥");
}
closeModal("authModal");
}catch(e){showToast(e.message);}
};

window.resetPassword = async ()=>{
const email=document.getElementById("auth-email").value.trim();
if(!email){showToast("Enter Email First");return;}
await sendPasswordResetEmail(auth,email);
showToast("Password Reset Sent âœ‰ï¸");
};

window.logoutUser = async ()=>{
await signOut(auth);
showToast("Logged Out");
};

onAuthStateChanged(auth,user=>{
document.getElementById("user-display").innerText=user?"Connected":"Guest";
});

</script>
</body>
</html>